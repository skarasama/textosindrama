<!DOCTYPE html>
{% load static %}
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz 1</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
        background-image: url("https://img.freepik.com/premium-photo/abstract-blue-watercolor-gradient-paint-grunge-texture-background_62391-961.jpg?w=2000");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        color: #2b3d52; 
        flex: 1;
        }


        /* üîπ Navbar */
        .navbar {
            background: linear-gradient(90deg, #6ec1e4, #2980b9);
            color: #fff;
            padding: 1em 0;
        }

        .navbar a {
            color: #eaf6fb !important;
            text-decoration: none;
            margin: 0 1em;
            transition: color 0.3s;
        }

        .navbar a:hover {
            color: #ffffff !important;
            text-shadow: 0 0 6px rgba(255,255,255,0.7);
        }

        /* üîπ Contenedor general */
        #container_quiz {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            max-width: 1000px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
            padding: 2em;
            margin: 2em auto;
            color: #2b3d52;
        }

        /* üîπ Bloque de preguntas */
        .quiz-questions {
            background-color: #f9fcff;
            padding: 1.5em;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            max-width: 800px;
            margin: 0 auto;
        }

        /* üîπ Texto narrativo */
        .question p {
            font-size: 1.05em;
            color: #34495e;
            margin-bottom: 1em;
            line-height: 1.6;
            padding: 0.8em;
            background: #eaf6fb;
            border-left: 4px solid #6ec1e4;
            border-radius: 6px;
            font-style: italic;
        }

        /* üîπ Opciones */
        .question div {
            display: flex;
            align-items: center;
            margin-bottom: 0.6em;
        }

        .question input[type="radio"] {
            margin-right: 0.6em;
            accent-color: #2980b9; 
            transform: scale(1.1);
        }

        .question label {
            font-size: 1em;
            padding: 0.5em 0.8em;
            border-radius: 6px;
            cursor: pointer;
            background: #ffffff;
            border: 1px solid #d0e6f7;
            transition: all 0.3s ease;
            flex: 1;
            color: #2b3d52;
        }

        .question label:hover {
            background-color: #d0e6f7;
        }

        .question input[type="radio"]:checked + label {
            background-color: #6ec1e4;
            color: #fff;
            font-weight: bold;
            border-color: #2980b9;
        }

        /* üîπ Feedback */
        .feedback {
            text-align: center;
            margin-top: 2em;
            padding: 1em;
            border-radius: 8px;
            font-size: 1.2em;
        }

        /* üîπ Botones */
        .btn-custom {
            background: #6ec1e4;
            color: #fff;
            font-size: 1rem;
            padding: 0.7em 1.5em;
            border-radius: 8px;
            border: none;
            transition: 0.3s;
        }

        .btn-custom:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        /* üîπ Footer */
        footer {
            width: 100%;
            position:static;
            bottom: 0;
            background-color: #000000;
            color: #2980b9;
            padding: 1em;
            text-align: center;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Texto sin Drama</a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="{% url 'index' %}">Inicio</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'listaQuiz' %}">Ejercicios</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'listaQuiz' %}">Quizzes</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Contacto</a></li>
                    
                    {% if user.is_authenticated %}
                        <li class="nav-item"><a class="nav-link" href="{% url 'perfil' %}">Perfil</a></li>
                        <li class="nav-item"><a class="nav-link" href="#">Cerrar Sesi√≥n</a></li>
                    {% else %}
                        <li class="nav-item"><a class="nav-link" href="{% url 'login' %}">Iniciar Sesi√≥n</a></li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'ingresoUsuarios' %}">Registrarse</a></li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <div id="container_quiz" class="container mt-5">
        <h5 style="color: #2980b9;">Preguntas:</h5>
        <div class="quiz-questions mt-4">
            <h7 style="color: #2b3d52;">Las preguntas de este cuestionario contin√∫an con la historia. Cada vez que respondas correctamente, aparecer√° la siguiente.</h7>
            
            <!-- üîπ Pregunta 1 -->
            <div class="question mt-3">
                <p>1) "L√≠a y Tom√°s llegan al borde del bosque y ven una cueva misteriosa. Una vez adentro, un grupo de murci√©lagos vol√≥ encima de ellos. Tuvieron que agacharse para no resultar da√±ados por los murci√©lagos." ¬øQu√© hicieron?</p>
                <div><input type="radio" id="q1a" name="q1" value="a"><label for="q1a">a) Usaron palos para defenderse.</label></div>
                <div><input type="radio" id="q1b" name="q1" value="b"><label for="q1b">b) Se agacharon para evitarlos.</label></div>
                <div><input type="radio" id="q1c" name="q1" value="c"><label for="q1c">c) Se fueron corriendo.</label></div>
                <div><input type="radio" id="q1d" name="q1" value="d"><label for="q1d">d) No hicieron nada.</label></div>
            </div>

            <!-- üîπ Pregunta 2 -->
            <div class="question mt-3">
                <p>2) "Despu√©s de evitar a los murci√©lagos, L√≠a y Tom√°s lograron cruzar al otro lado de la cueva. De repente, se encuentran con un r√≠o que gu√≠a a un templo. El agua fluye r√°pidamente y no pueden cruzarlo caminando, as√≠ que buscaron una rama como puente..." ¬øQu√© pas√≥ despu√©s?</p>
                <div><input type="radio" id="q2a" name="q2" value="a"><label for="q2a">a) Nada, no lograron salir.</label></div>
                <div><input type="radio" id="q2b" name="q2" value="b"><label for="q2b">b) Buscaron a los murci√©lagos para atacarlos.</label></div>
                <div><input type="radio" id="q2c" name="q2" value="c"><label for="q2c">c) Encontraron un r√≠o que cruza a un templo.</label></div>
                <div><input type="radio" id="q2d" name="q2" value="d"><label for="q2d">d) Gritaron por ayuda.</label></div>
            </div>

            <!-- üîπ Pregunta 3 -->
            <div class="question mt-3">
                <p>3) "Tras cruzar el r√≠o con la ayuda de una rama, L√≠a y Tom√°s avanzan hasta llegar al templo iluminado por una luz misteriosa. En el centro de la sala hay una estatua antigua con un diamante en su mano." ¬øQu√© hab√≠a en la mano de la estatua?</p>
                <div><input type="radio" id="q3a" name="q3" value="a"><label for="q3a">a) Un rub√≠</label></div>
                <div><input type="radio" id="q3b" name="q3" value="b"><label for="q3b">b) Un zafiro</label></div>
                <div><input type="radio" id="q3c" name="q3" value="c"><label for="q3c">c) Una esmeralda</label></div>
                <div><input type="radio" id="q3d" name="q3" value="d"><label for="q3d">d) Un diamante</label></div>
            </div>

            <!-- üîπ Pregunta 4 -->
            <div class="question mt-3">
                <p>4) "Mientras examinan la estatua, L√≠a nota que en el suelo hay piedras dispuestas en forma de c√≠rculo. Al tocarlas, el suelo comienza a temblar y escaparon lo m√°s pronto posible del templo." ¬øQu√© hicieron?</p>
                <div><input type="radio" id="q4a" name="q4" value="a"><label for="q4a">a) Intentaron salir r√°pidamente del templo.</label></div>
                <div><input type="radio" id="q4b" name="q4" value="b"><label for="q4b">b) Se quedaron quietos esperando.</label></div>
                <div><input type="radio" id="q4c" name="q4" value="c"><label for="q4c">c) L√≠a intent√≥ mover las piedras.</label></div>
                <div><input type="radio" id="q4d" name="q4" value="d"><label for="q4d">d) Gritaron por ayuda.</label></div>
            </div>

            <!-- üîπ Pregunta 5 -->
            <div class="question mt-3">
                <p>5) "Despu√©s de un rato, el temblor cesa y el suelo se estabiliza. De repente, apareci√≥ el guardi√°n para felicitarlos por recuperar el objeto, pero no era el final del viaje..." ¬øQu√© pas√≥ despu√©s?</p>
                <div><input type="radio" id="q5a" name="q5" value="a"><label for="q5a">a) No lograron salir del templo.</label></div>
                <div><input type="radio" id="q5b" name="q5" value="b"><label for="q5b">b) Apareci√≥ el guardi√°n nuevamente.</label></div>
                <div><input type="radio" id="q5c" name="q5" value="c"><label for="q5c">c) Decidieron regresar a la cueva.</label></div>
                <div><input type="radio" id="q5d" name="q5" value="d"><label for="q5d">d) Se cayeron al r√≠o.</label></div>
            </div>
        </div>
            
        <div class="feedback" id="feedback"></div>
        
        <button class="btn btn-custom mt-3" id="sendButton" onclick="evaluateCurrentQuestion()">Enviar Respuesta</button>
        <button class="btn btn-custom mt-3" id="retryButton" style="display: none;" onclick="resetQuiz()">Reintentar</button>
    </div>

    <footer>
        <p>&copy; 2024 Lectura Pro. Todos los derechos reservados.</p>
    </footer>

<script>
    // üîπ Respuestas correctas (una por cada pregunta en orden)
    const correctAnswers = ['b', 'c', 'd', 'a', 'b']; 
    let currentQuestionIndex = 0; 
    let score = 0; 

    document.addEventListener('DOMContentLoaded', () => {
        const questionDivs = document.querySelectorAll('.question');
        questionDivs.forEach((question, index) => {
            question.style.display = index === currentQuestionIndex ? 'block' : 'none';
        });
    });

    function evaluateCurrentQuestion() {
        const questionDivs = document.querySelectorAll('.question');
        const currentQuestion = questionDivs[currentQuestionIndex];

        const selectedAnswer = currentQuestion.querySelector('input[type="radio"]:checked');
        if (selectedAnswer) {
            const userAnswer = selectedAnswer.value;
            const feedback = document.getElementById('feedback');

            if (userAnswer === correctAnswers[currentQuestionIndex]) {
                score++;
                feedback.innerHTML = '<p style="color: green;">‚úî Correcto</p>';
            } else {
                feedback.innerHTML = '<p style="color: red;">‚úò Incorrecto</p>';
            }

            setTimeout(() => {
                feedback.innerHTML = '';
                currentQuestion.style.display = 'none';
                currentQuestionIndex++;

                if (currentQuestionIndex < questionDivs.length) {
                    questionDivs[currentQuestionIndex].style.display = 'block';
                } else {
                    displayFinalResult();
                }
            }, 1500);
        } else {
            alert('Por favor, selecciona una respuesta.');
        }
    }

    function displayFinalResult() {
        const percentage = (score / correctAnswers.length) * 100;

        if (percentage === 100) {
            window.location.href = "{% url 'oro1' %}";
        } else if (percentage >= 50) {
            window.location.href = "{% url 'plata1' %}";
        } else if (percentage > 0) {
            window.location.href = "{% url 'bronce1' %}";
        } else {
            window.location.href = "{% url 'sinMedalla1' %}";
        }
    }

    function resetQuiz() {
        currentQuestionIndex = 0;
        score = 0;
        document.getElementById('feedback').innerHTML = '';
        document.getElementById('retryButton').style.display = 'none';
        document.getElementById('sendButton').style.display = 'block';

        const questionDivs = document.querySelectorAll('.question');
        questionDivs.forEach((question, index) => {
            question.style.display = index === 0 ? 'block' : 'none';
        });
    }
</script>
</body>
</html>

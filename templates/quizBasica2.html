<!DOCTYPE html>
{% load static %}
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Intermedio</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
    body {
        background-image: url("https://img.freepik.com/premium-photo/abstract-blue-watercolor-gradient-paint-grunge-texture-background_62391-961.jpg?w=2000");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        color: #2b3d52;
        flex: 1;
    }

        /* üîπ Navbar */
        .navbar {
            background: linear-gradient(90deg, #6ec1e4, #2980b9);
            color: #fff;
            padding: 1em 0;
        }

        .navbar a {
            color: #eaf6fb !important;
            text-decoration: none;
            margin: 0 1em;
            transition: color 0.3s;
        }

        .navbar a:hover {
            color: #ffffff !important;
            text-shadow: 0 0 6px rgba(255,255,255,0.7);
        }

        /* üîπ Contenedor general */
        #container_quiz {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            max-width: 1000px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
            padding: 2em;
            margin: 2em auto;
            color: #2b3d52;
        }

        /* üîπ Bloque de preguntas */
        .quiz-questions {
            background-color: #f9fcff;
            padding: 1.5em;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            max-width: 800px;
            margin: 0 auto;
        }

        /* üîπ Texto narrativo */
        .question p {
            font-size: 1.05em;
            color: #34495e;
            margin-bottom: 1em;
            line-height: 1.6;
            padding: 0.8em;
            background: #eaf6fb;
            border-left: 4px solid #6ec1e4;
            border-radius: 6px;
            font-style: italic;
        }

        /* üîπ Opciones */
        .question div {
            display: flex;
            align-items: center;
            margin-bottom: 0.6em;
        }

        .question input[type="radio"] {
            margin-right: 0.6em;
            accent-color: #2980b9; 
            transform: scale(1.1);
        }

        .question label {
            font-size: 1em;
            padding: 0.5em 0.8em;
            border-radius: 6px;
            cursor: pointer;
            background: #ffffff;
            border: 1px solid #d0e6f7;
            transition: all 0.3s ease;
            flex: 1;
            color: #2b3d52;
        }

        .question label:hover {
            background-color: #d0e6f7;
        }

        .question input[type="radio"]:checked + label {
            background-color: #6ec1e4;
            color: #fff;
            font-weight: bold;
            border-color: #2980b9;
        }

        /* üîπ Feedback */
        .feedback {
            text-align: center;
            margin-top: 2em;
            padding: 1em;
            border-radius: 8px;
            font-size: 1.2em;
        }

        /* üîπ Botones */
        .btn-custom {
            background: #6ec1e4;
            color: #fff;
            font-size: 1rem;
            padding: 0.7em 1.5em;
            border-radius: 8px;
            border: none;
            transition: 0.3s;
        }

        .btn-custom:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        /* üîπ Footer */
        footer {
            width: 100%;
            position:static;
            bottom: 0;
            background-color: #000000;
            color: #2980b9;
            padding: 1em;
            text-align: center;
        }
</style>

</head>
<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
        <a class="navbar-brand" href="{% url 'index' %}">Texto sin Drama</a>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link" href="{% url 'index' %}">Inicio</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url 'listaQuiz' %}">Ejercicios</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url 'listaQuiz' %}">Quizzes</a></li>
                <li class="nav-item"><a class="nav-link" href="#">Contacto</a></li>

                {% if user.is_authenticated %}
                    <li class="nav-item"><a class="nav-link" href="{% url 'perfil' %}">Perfil</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Cerrar Sesi√≥n</a></li>
                {% else %}
                    <li class="nav-item"><a class="nav-link" href="{% url 'login' %}">Iniciar Sesi√≥n</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'ingresoUsuarios' %}">Registrarse</a></li>
                {% endif %}
            </ul>
        </div>
    </div>
</nav>

<!-- CONTENEDOR -->
<div id="container_quiz">

    <div class="quiz-questions">

        <h3 style="text-align:center; color:#2980b9;">Preguntas</h3>

        <!-- ================= FRAGMENTO 1 ================= -->
        <div class="question-block">
            <div class="story-box">
                L√≠a y Tom√°s avanzan por un sendero estrecho cuando encuentran un puente de madera suspendido sobre un r√≠o caudaloso. El puente cruje con cada r√°faga de viento y algunas tablas faltan.
                Aun as√≠, deciden cruzarlo caminando lentamente y con mucho cuidado para no caer.
            </div>

            <div class="question">
                <div class="question-title">1) ¬øQu√© hicieron al llegar al puente?</div>

                <div><input type="radio" id="q1a" name="q1" value="a"><label for="q1a">a) Lo cruzaron caminando lentamente y con cuidado.</label></div>
                <div><input type="radio" id="q1b" name="q1" value="b"><label for="q1b">b) Buscaron otro camino para no arriesgarse.</label></div>
                <div><input type="radio" id="q1c" name="q1" value="c"><label for="q1c">c) Lanzaron piedras para comprobar si era seguro.</label></div>
                <div><input type="radio" id="q1d" name="q1" value="d"><label for="q1d">d) Gritaron pidiendo ayuda.</label></div>
            </div>
        </div>

        <!-- ================= FRAGMENTO 2 ================= -->
        <div class="question-block" style="display:none;">
            <div class="story-box">
                Una vez al otro lado, se internan en un bosque lleno de √°rboles gigantes y una densa niebla. La visibilidad es baja, pero Tom√°s observa con atenci√≥n el suelo.
                All√≠ descubre un conjunto de huellas frescas marcadas en la tierra h√∫meda, claramente recientes.
            </div>

            <div class="question">
                <div class="question-title">2) ¬øQu√© descubri√≥ Tom√°s?</div>

                <div><input type="radio" id="q2a" name="q2" value="a"><label for="q2a">a) Un mapa bajo una roca.</label></div>
                <div><input type="radio" id="q2b" name="q2" value="b"><label for="q2b">b) Huellas recientes marcadas en la tierra.</label></div>
                <div><input type="radio" id="q2c" name="q2" value="c"><label for="q2c">c) Un campamento abandonado.</label></div>
                <div><input type="radio" id="q2d" name="q2" value="d"><label for="q2d">d) Una se√±al tallada en un √°rbol.</label></div>
            </div>
        </div>

        <!-- ================= FRAGMENTO 3 ================= -->
        <div class="question-block" style="display:none;">
            <div class="story-box">
                Siguiendo las huellas, encuentran una caba√±a abandonada. Al entrar, descubren una mesa cubierta de objetos extra√±os:
                libros antiguos, frascos brillantes, plumas y un colgante con forma de luna.
                Todo est√° dispuesto como si alguien hubiese salido hace solo unos minutos.
            </div>

            <div class="question">
                <div class="question-title">3) ¬øQu√© encontraron dentro de la caba√±a?</div>

                <div><input type="radio" id="q3a" name="q3" value="a"><label for="q3a">a) Una mesa con objetos extra√±os.</label></div>
                <div><input type="radio" id="q3b" name="q3" value="b"><label for="q3b">b) Un cofre lleno de monedas de oro.</label></div>
                <div><input type="radio" id="q3c" name="q3" value="c"><label for="q3c">c) Un mapa para salir del bosque.</label></div>
                <div><input type="radio" id="q3d" name="q3" value="d"><label for="q3d">d) Una nota de advertencia.</label></div>
            </div>
        </div>

        <!-- ================= FRAGMENTO 4 ================= -->
        <div class="question-block" style="display:none;">
            <div class="story-box">
                De pronto, la caba√±a tiembla y se derrumba. L√≠a y Tom√°s salen r√°pidamente y ven a una figura encapuchada de pie entre los √°rboles.
                La figura sostiene en la mano el colgante con forma de luna que antes estaba en la mesa.
            </div>

            <div class="question">
                <div class="question-title">4) ¬øQui√©n ten√≠a el colgante?</div>

                <div><input type="radio" id="q4a" name="q4" value="a"><label for="q4a">a) Un animal del bosque.</label></div>
                <div><input type="radio" id="q4b" name="q4" value="b"><label for="q4b">b) Una figura encapuchada.</label></div>
                <div><input type="radio" id="q4c" name="q4" value="c"><label for="q4c">c) El due√±o de la caba√±a.</label></div>
                <div><input type="radio" id="q4d" name="q4" value="d"><label for="q4d">d) Un cazador.</label></div>
            </div>
        </div>

        <!-- ================= FRAGMENTO 5 ================= -->
        <div class="question-block" style="display:none;">
            <div class="story-box">
                La figura encapuchada se comunica con ellos sin mover los labios.
                Explica que el colgante no es un adorno, sino una llave m√°gica, y que solo podr√°n salir del bosque si superan una √∫ltima prueba de sabidur√≠a.
            </div>

            <div class="question">
                <div class="question-title">5) ¬øQu√© revel√≥ la figura encapuchada?</div>

                <div><input type="radio" id="q5a" name="q5" value="a"><label for="q5a">a) Que el colgante era una llave y deb√≠an pasar una prueba.</label></div>
                <div><input type="radio" id="q5b" name="q5" value="b"><label for="q5b">b) Que el bosque era una ilusi√≥n.</label></div>
                <div><input type="radio" id="q5c" name="q5" value="c"><label for="q5c">c) Que deb√≠an regresar por donde vinieron.</label></div>
                <div><input type="radio" id="q5d" name="q5" value="d"><label for="q5d">d) Que el puente iba a colapsar.</label></div>
            </div>
        </div>

    </div>

    <div class="feedback" id="feedback"></div>

    <button class="btn btn-custom" id="sendButton" onclick="nextQuestion()">Enviar Respuesta</button>

</div>

<footer>
    <p>¬© 2024 Lectura Pro. Todos los derechos reservados.</p>
</footer>

<script>
    const correctAnswers = ['a', 'b', 'a', 'b', 'a'];

    let currentIndex = 0;

    function nextQuestion() {
        const blocks = document.querySelectorAll(".question-block");
        const currentBlock = blocks[currentIndex];
        const selected = currentBlock.querySelector("input[type='radio']:checked");
        const feedback = document.getElementById("feedback");

        if (!selected) {
            alert("Debes seleccionar una alternativa.");
            return;
        }

        if (selected.value === correctAnswers[currentIndex]) {
            feedback.innerHTML = "<p style='color:green;'>‚úî Correcto</p>";
        } else {
            feedback.innerHTML = "<p style='color:red;'>‚úò Incorrecto</p>";
        }

        setTimeout(() => {
            feedback.innerHTML = "";
            currentBlock.style.display = "none";
            currentIndex++;

            if (currentIndex < blocks.length) {
                blocks[currentIndex].style.display = "block";
            } else {
                finalRedirect();
            }
        }, 1200);
    }

    function finalRedirect() {
        window.location.href = "{% url 'oro1' %}";
    }
</script>

</body>
</html>
